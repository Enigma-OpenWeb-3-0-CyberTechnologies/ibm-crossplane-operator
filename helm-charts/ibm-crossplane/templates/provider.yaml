{{- range $.Values.provider.packages }}
{{ if ne . "" }}
apiVersion: pkg.crossplane.io/v1
kind: Provider
metadata:
  name: {{ regexReplaceAll "(:|@).*" (regexReplaceAll ".*/" . "") "" | trim  }}
spec:
  package: {{ . | trim }}
{{- with $.Values.provder.packagePullSecrets }}
  packagePullSecrets:
  {{- range $.Values.provider.packagePullSecrets }}
  - name: {{ .| trim  }}
  {{- end }}
{{- end }}
---
{{ end }}
{{- end }}
